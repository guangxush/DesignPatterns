---

typora-root-url: ../DDD
---

# 领域驱动设计的原则与实践

## 什么是领域驱动设计

### DDD的战略模式

- 提炼问题域以揭示重要之处
- 创建一个模型以解决领域问题
- 使用公共语言开启建模协作
- 将模型域歧义和损坏隔离
- 理解上下文之间的关系

### DDD的战术模式

帮助创建用于复杂有界上下文的有效模型的模式集合。

适用于问题空间的DDD模式

![image-20200324205224934](./image/questionDDD.png)

适用于解空间的DDD模式

![image-20200324205436581](/Users/guangxush/IDEA/DesignPatterns/src/DDD/image/questionResult.png)

### 领域驱动设计的实践与原则

- 专注于核心领域
- 通过协作进行学习
- 通过探索和实验创建模型
- 通信
- 理解模型的适用性
- 让模型持续发展
- 领域驱动设计的常见误区

### 领域驱动设计的常见误区

- DDD不是以代码为中心的，战术模式是DDD的关键
- DDD是一套框架，在架构上具有不可知性
- DDD可能需要付出大量努力，需要迭代式的开发论和以业务为导向以及聪明的开发人员

### 要点总结

- 领域驱动设计DDD是一种开发思想体系，旨在管理为复杂问题域编写的软件的创作和维护工作
- DDD是模式、原则和实践的集合，可以被应用到软件设计以管理复杂性
- DDD两种模型：战略模型和战术模型
- 将大问题提炼成子域，并非系统所有部分都要精心设计
- 为每一个子域创建一个抽象模型以便管理领域问题
- 为保留模型的完整性，要在有界上下文中定义它
- DDD关注点：核心领域、协作、与领域专家进行探讨、实验研究生成有用的模型
- DDD是软件开发的一种以语言和领域为中心的方式

------



## 提炼问题域

### 知识提炼与协作

知识提炼是从问题域中提炼出相关信息的技术，其目的构建能够满足业务用例需求的有用模型。

知识提炼的方法：

- 通过通用语言（UL）达成共识
- 领域知识的重要性
- 业务分析员的角色
- 一个持续过程

### 与领域专家一起获得领域见解

- 问题空间会给出一组需求、输入和预期输出，这是业务相关人员提供的。解空间包含一个能满足需要的模型，这是领域专拣能够提供帮助的地方。
- 开发团队和领域专家一起工作，加深对问题的理解
- 开发团队与领域专家互动，这一更深层的设计简洁使得软件可用冰在业务过程变更时能够进行适应性调整、

### 有效提炼知识的模式

- 专注在最有意思的对话上
- 从用例开始，抓住真实情况的过程图
- 提出有力的问题
- 画UML草图
- CRC卡：类名称、类职责、与满足其目的相关且所需的类
- 延迟对模型中概念的命名
- 行动驱动开发BDD是基于测试驱动开发TDD的一种软件开发过程，专注于获取系统的行为，然后由外而内地驱动设计；BDD关注的是软件的行为，系统应该产生怎样的行为，DDD关注的是实现行为的软件核心的领域模型
- 快速成型，快速编码，有助于创建你的有力问题并帮助找到遗漏的用例
- 查看基于纸面的系统

### 查看现有的模型

- 不断尝试
- 理解意图：共享和理解隐含的愿景
- 事件风暴：研讨会活动旨在为业务和开发团队快速建立对问题域的理解
- 影响地图：创建了重点突出关键业务信息的类似思维导图
- 理解业务模型：业务模型包含大量有用的领域信息并且重点强调业务的根本目标
- 业务模型的9个模块：客户细分、价值提供、渠道、客户关系、营收来源、核心资源、核心活动、核心合作伙伴、成本结构
- 刻意发现，在初始阶段，团队应该付出努力识别出他们最不了解的部分
- 模型探讨漩涡：场景探讨、建模、考验模型、收集与记录、代码探究

### 要点

- 知识提炼是处理领域信息以识别出能用于构建有用模型的相关碎片知识的技术
- 知识是由开发人员与领域专家协作获得的，协作有助于弥补所有的知识漏洞并促成共识
- 共识是通过通用语言UL来达成的
- 知识提炼是一个持续的过程，协作和业务人的参与不应该局限于项目的初始阶段，深层简介和突破仅会产生为解决问题而进行的多次开发迭代以后
- 业务相关人员为你提供应用程序的需求，并非解答领域详细问题，核心或复杂的建模需要领域专家
- 围绕系统最重要的用例驱动知识提炼，寻求领域专家遍历系统用例的具体场景，以便帮助弥补知识漏洞
- 草图和事件风暴技术可视化你所学的知识，提升业务专家的协作并让知识的提炼环节更有趣
- 要有计划的修改模型，不要过于投入，因为知识提炼的突破可能会被废弃
- 提出有力的问题并了解业务意图
- 使用BDD专注于应用程序的行为，在代码中进行实验证明模型的有效性，需要对模型进行修改和反馈
- 尽早识别出团队的知识漏洞，启用刻意发现，消除解决不了的未知问题
- 查看行业中已有的处理过程和模型，避免重新发明车轮以及加速领域知识的获取

## 专注于核心领域

- 提炼用于分解大的问题以便找出核心、支撑和通用域
- 提炼有助于降低问题空间的复杂性
- 专注和精力应该投入到核心领域，在此处使用你最好的开发人员
- 核心领域是你编写软件的原因
- 需要考虑外包开发、采购支撑和通用域或者将初级开发人员放到支撑和通用域
- 一份领域愿景说明会解释对产品取得成功的核心内容的共识，使用领域专家、项目启动文档以及业务战略介绍来帮助发出领域愿景说明的通告
- 随着更多的了解问题，要规划核心领域内模型的变更，不要太过于重视一个解决方案，你的核心领域回宿舍时间的变化而变化
- 并非系统的每一个部分都要精心设计，将精力专注于核心领域上，对于一流的BBoM系统应该定义一个防止损坏边界来避免新代码变得与混乱的旧代码交织在一起

### 模型驱动设计

![image-20200325183505317](/image/DDDfunction.png)



领域模型位于领域驱动设计的中心，该模型首先是作为分析模型在知识提炼环节通过开发团队和业务专家之间的协作共同完成的，表示一个非真实的问题域视图，这个试图仅仅是为了满足业务用例的需求。它是在团队沟通所用的共同语言以及团队绘制的图表中来描述的，当他作为代码实现来表示时，通过使用共同语言将其绑定到了分析模型，其实用性来自其能够描述领域中的复杂逻辑和决策以便处理业务用例，该模型仅包含于解决要创建额应用程序上下文中的问题有关内容，他需要与业务一道持续演化以保持其自身有用和有效性。

- 领域表示正在处理的问题域，反映的是当前局面切实面临的问题，领域模式是问题的抽象，表示一个非真实的问题域视图的代码实现来描述。
- 模型是由分析模型和代码模型来表示的，他们完全是一回事，分析模型有时也是业务模型，他是描述系统模型的构建集合，可以是非正式的UML，用于描述技术实现；DDD不提倡去分析模型，代码模型是领域模型的主要表现，会验证业务设想并快速凸显与分析模型不一致的地方。
- 分析模型只有在它保持与代码模型协同时才有用
- 代码是表述模型的主要形式，需要使用通用语言来约束它
- 开发UL的过程是DDD最重要的一环，因为它能够促进沟通和学习
- 必须明确定义领域专业术语以确保含义准确，因为沟通中使用的专业语言会被融入到代码实现中。
- 通用语言应该用于测试、命名空间、类名和方法
- 使用领域场景来证明模型的可用性并验证团队对领域的理解
- 仅为核心领域应用模型驱动设计并创建UL才能带来变化，不要将这些实践应用到整个应用程序





### 

